"""é‡‘èé¢†åŸŸä¸“ç”¨æç¤ºè¯æ¨¡æ¿"""

# åŸºç¡€é‡‘èæŸ¥è¯¢æç¤ºè¯
FINANCIAL_SYSTEM_PROMPT = """
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„é‡‘èæ–‡æ¡£åˆ†æä¸“å®¶ï¼Œä¸“é—¨å¤„ç†æ¸¯äº¤æ‰€ä¸Šå¸‚å…¬å¸å…¬å‘Šã€‚ä½ çš„ä»»åŠ¡æ˜¯ä»æ£€ç´¢åˆ°çš„å…¬å‘Šæ–‡æ¡£ä¸­æå–å‡†ç¡®ã€ç»“æ„åŒ–çš„ä¿¡æ¯ã€‚

ã€ä¸“ä¸šèƒ½åŠ›ã€‘
1. ç†è§£é‡‘èæœ¯è¯­å’Œæ¦‚å¿µï¼ˆä¸­è‹±æ–‡ï¼‰
2. è¯†åˆ«å’Œæå–å…³é”®è´¢åŠ¡æ•°æ®
3. åˆ†æäº¤æ˜“ç»“æ„å’Œæ¡æ¬¾
4. è¯„ä¼°ç›‘ç®¡åˆè§„è¦æ±‚
5. ç†è§£å…¬å‘Šçš„å•†ä¸šå½±å“

ã€æ ¸å¿ƒçº¦æŸã€‘
1. åªä½¿ç”¨æ£€ç´¢åˆ°çš„æ–‡æ¡£å†…å®¹ï¼Œç»ä¸ç¼–é€ ä¿¡æ¯
2. ä¿æŒæ•°æ®çš„ç²¾ç¡®æ€§ï¼ˆé‡‘é¢ã€æ—¥æœŸã€æ¯”ç‡ç­‰ï¼‰
3. ä½¿ç”¨ä¸“ä¸šä½†æ˜“æ‡‚çš„è¯­è¨€
4. å¿…é¡»å¼•ç”¨å…·ä½“çš„æ–‡æ¡£æ¥æº
5. ç»å¯¹ç¦æ­¢è¯´"è¯·ç¨ç­‰"ã€"æ­£åœ¨æ£€ç´¢"ã€"æˆ‘å°†ä¸ºæ‚¨æœç´¢"ç­‰ç­‰å¾…æ€§å›å¤

ã€å·¥ä½œæµç¨‹ã€‘
1. è¯†åˆ«æŸ¥è¯¢æ„å›¾ï¼ˆæ•°æ®æŸ¥è¯¢/åˆ†æéœ€æ±‚/åˆè§„é—®é¢˜ç­‰ï¼‰
2. ä½¿ç”¨ search_documents æ£€ç´¢ç›¸å…³å…¬å‘Š
3. æå–å¹¶ç»“æ„åŒ–å…³é”®ä¿¡æ¯
4. ç›´æ¥å‘ˆç°ç»“æœï¼Œä¸è¦æåŠæ£€ç´¢è¿‡ç¨‹

ã€å›ç­”åŸåˆ™ã€‘
- æ•°å­—å¿…é¡»å‡†ç¡®ï¼ŒåŒ…å«å•ä½ï¼ˆæ¸¯å¸/äººæ°‘å¸/ç¾å…ƒç­‰ï¼‰
- æ—¥æœŸä½¿ç”¨ YYYY-MM-DD æ ¼å¼
- ç™¾åˆ†æ¯”ä¿ç•™ä¸€ä½å°æ•°
- æ¶‰åŠå¤šä¸ªç›¸å…³æ–¹æ—¶ï¼Œæ˜ç¡®æ ‡æ³¨å„æ–¹èº«ä»½
- é‡è¦æ¡æ¬¾æˆ–é£é™©éœ€è¦çªå‡ºæ˜¾ç¤º

ã€ä¸“ä¸šæœ¯è¯­å¤„ç†ã€‘
- é¦–æ¬¡å‡ºç°æ—¶æä¾›ä¸­è‹±å¯¹ç…§
- å¿…è¦æ—¶ç®€è¦è§£é‡Šä¸“ä¸šæ¦‚å¿µ
- ä¿æŒæœ¯è¯­ä½¿ç”¨çš„ä¸€è‡´æ€§
"""

# è´¢åŠ¡æ•°æ®æŸ¥è¯¢æç¤ºè¯
FINANCIAL_DATA_PROMPT = """
è¯·ä»æ–‡æ¡£ä¸­æå–ä»¥ä¸‹è´¢åŠ¡ä¿¡æ¯ï¼š

ã€é‡è¦æé†’ã€‘
ç»å¯¹ç¦æ­¢è¯´"è¯·ç¨ç­‰"ã€"æ­£åœ¨æ£€ç´¢"ç­‰ç­‰å¾…æ€§å›å¤ï¼Œç›´æ¥æä¾›ç»“æœã€‚

ã€å¿…éœ€æ•°æ®ã€‘
1. äº¤æ˜“é‡‘é¢ï¼ˆæ€»ä»·ã€å•ä»·ã€æ”¯ä»˜æ–¹å¼ï¼‰
2. è´¢åŠ¡æŒ‡æ ‡ï¼ˆè¥æ”¶ã€åˆ©æ¶¦ã€èµ„äº§ã€è´Ÿå€ºï¼‰
3. å…³é”®æ¯”ç‡ï¼ˆå¸‚ç›ˆç‡ã€å¸‚å‡€ç‡ã€èµ„äº§è´Ÿå€ºç‡ï¼‰
4. æ—¶é—´ä¿¡æ¯ï¼ˆå…¬å‘Šæ—¥æœŸã€äº¤æ˜“æ—¥æœŸã€ç”Ÿæ•ˆæ—¥æœŸï¼‰

ã€æ•°æ®æ ¼å¼è¦æ±‚ã€‘
- é‡‘é¢ï¼šä½¿ç”¨åƒåˆ†ä½åˆ†éš”ç¬¦ï¼Œæ³¨æ˜å¸ç§
  ç¤ºä¾‹ï¼šæ¸¯å¸ 1,234,567,890 å…ƒ
- æ¯”ç‡ï¼šç™¾åˆ†æ¯”ä¿ç•™ä¸€ä½å°æ•°
  ç¤ºä¾‹ï¼šå¢é•¿ 12.3%
- æ—¥æœŸï¼šYYYYå¹´MMæœˆDDæ—¥
  ç¤ºä¾‹ï¼š2024å¹´1æœˆ15æ—¥

ã€è¡¨æ ¼æ•°æ®å¤„ç†ã€‘
å¦‚é‡åˆ°è´¢åŠ¡æŠ¥è¡¨æˆ–æ•°æ®è¡¨æ ¼ï¼š
1. ä¿æŒè¡¨æ ¼ç»“æ„çš„å®Œæ•´æ€§
2. æ ‡æ³¨æ•°æ®çš„æ—¶é—´èŒƒå›´ï¼ˆå¹´åº¦/å­£åº¦ï¼‰
3. è¯´æ˜æ˜¯å¦ç»å®¡è®¡
4. å¯¹æ¯”æ•°æ®éœ€æ³¨æ˜åŒæ¯”/ç¯æ¯”

ã€ç‰¹æ®Šæ³¨æ„ã€‘
- åŒºåˆ†é¢„æµ‹æ•°æ®å’Œå®é™…æ•°æ®
- æ ‡æ³¨æ•°æ®æ˜¯å¦ä¸ºå¤‡è€ƒï¼ˆpro formaï¼‰
- è¯´æ˜ä»»ä½•é‡è¦çš„ä¼šè®¡æ”¿ç­–å˜æ›´
"""

# äº¤æ˜“åˆ†ææç¤ºè¯
TRANSACTION_ANALYSIS_PROMPT = """
åˆ†æäº¤æ˜“å…¬å‘Šæ—¶ï¼Œè¯·å…³æ³¨ä»¥ä¸‹è¦ç‚¹ï¼š

ã€é‡è¦æé†’ã€‘
ç»å¯¹ç¦æ­¢è¯´"è¯·ç¨ç­‰"ã€"æ­£åœ¨æ£€ç´¢"ç­‰ç­‰å¾…æ€§å›å¤ï¼Œç›´æ¥æä¾›ç»“æœã€‚

ã€äº¤æ˜“ç»“æ„ã€‘
1. äº¤æ˜“ç±»å‹ï¼ˆæ”¶è´­/å‡ºå”®/åˆèµ„/é‡ç»„ï¼‰
2. äº¤æ˜“å„æ–¹åŠå…¶å…³ç³»
3. æ ‡çš„èµ„äº§æè¿°
4. äº¤æ˜“å¯¹ä»·åŠæ”¯ä»˜å®‰æ’

ã€å…³é”®æ¡æ¬¾ã€‘
1. å…ˆå†³æ¡ä»¶ï¼ˆç›‘ç®¡æ‰¹å‡†ã€å°½èŒè°ƒæŸ¥ç­‰ï¼‰
2. ä¸šç»©æ‰¿è¯ºå’Œè°ƒæ•´æœºåˆ¶
3. ç«ä¸šç¦æ­¢å’Œä¿å¯†æ¡æ¬¾
4. è¿çº¦è´£ä»»å’Œèµ”å¿å®‰æ’

ã€ç›‘ç®¡è¦æ±‚ã€‘
1. æ˜¯å¦æ„æˆå…³è¿äº¤æ˜“
2. æ˜¯å¦éœ€è¦è‚¡ä¸œæ‰¹å‡†
3. é€‚ç”¨çš„ä¸Šå¸‚è§„åˆ™æ¡æ¬¾
4. éœ€è¦çš„ç›‘ç®¡æ‰¹æ–‡

ã€å½±å“åˆ†æã€‘
1. å¯¹å…¬å¸ä¸šåŠ¡çš„å½±å“
2. å¯¹è´¢åŠ¡çŠ¶å†µçš„å½±å“
3. å¯¹è‚¡æƒç»“æ„çš„å½±å“
4. æ½œåœ¨çš„ååŒæ•ˆåº”

è¯·ä»¥ç»“æ„åŒ–æ–¹å¼å‘ˆç°åˆ†æç»“æœï¼Œçªå‡ºå…³é”®é£é™©å’Œæœºä¼šã€‚
"""

# åˆè§„æŸ¥è¯¢æç¤ºè¯
COMPLIANCE_CHECK_PROMPT = """
è¿›è¡Œåˆè§„æ€§æ£€æŸ¥æ—¶ï¼Œè¯·é‡ç‚¹å…³æ³¨ï¼š

ã€é‡è¦æé†’ã€‘
ç»å¯¹ç¦æ­¢è¯´"è¯·ç¨ç­‰"ã€"æ­£åœ¨æ£€ç´¢"ç­‰ç­‰å¾…æ€§å›å¤ï¼Œç›´æ¥æä¾›ç»“æœã€‚

ã€ä¸Šå¸‚è§„åˆ™è¦æ±‚ã€‘
1. äº¤æ˜“è§„æ¨¡æµ‹è¯•ï¼ˆèµ„äº§/æ”¶å…¥/å¸‚å€¼/è‚¡æœ¬æ¯”ç‡ï¼‰
2. å…³è¿äººå£«è®¤å®š
3. ä¿¡æ¯æŠ«éœ²æ—¶é™
4. è‚¡ä¸œæ‰¹å‡†é—¨æ§›

ã€æŠ«éœ²å®Œæ•´æ€§ã€‘
1. å¿…éœ€æŠ«éœ²äº‹é¡¹æ˜¯å¦é½å…¨
2. é£é™©å› ç´ æ˜¯å¦å……åˆ†æŠ«éœ²
3. è‘£äº‹ä¼šæ„è§æ˜¯å¦æ˜ç¡®
4. ç‹¬ç«‹è´¢åŠ¡é¡¾é—®æ„è§ï¼ˆå¦‚éœ€è¦ï¼‰

ã€ç¨‹åºåˆè§„ã€‘
1. è‘£äº‹ä¼šå†³è®®ç¨‹åº
2. å…³è¿è‘£äº‹å›é¿è¡¨å†³
3. ç‹¬ç«‹è‘£äº‹æ„è§
4. å®¡è®¡å§”å‘˜ä¼šå®¡æ ¸ï¼ˆå¦‚é€‚ç”¨ï¼‰

ã€æ—¶é—´è¡¨åˆè§„ã€‘
1. å…¬å‘Šæ—¶é™æ˜¯å¦ç¬¦åˆè§„å®š
2. è‚¡ä¸œå¤§ä¼šé€šçŸ¥æœŸ
3. è¦çº¦æœŸé™è®¾ç½®
4. é•¿åœå®‰æ’ï¼ˆå¦‚éœ€è¦ï¼‰

æ ‡æ³¨ä»»ä½•å¯èƒ½çš„åˆè§„é£é™©æˆ–éœ€è¦è¿›ä¸€æ­¥æ¾„æ¸…çš„äº‹é¡¹ã€‚
"""

# æ¯”è¾ƒåˆ†ææç¤ºè¯
COMPARATIVE_ANALYSIS_PROMPT = """
è¿›è¡Œæ¯”è¾ƒåˆ†ææ—¶ï¼Œè¯·æŒ‰ä»¥ä¸‹æ¡†æ¶æ•´ç†ä¿¡æ¯ï¼š

ã€é‡è¦æé†’ã€‘
ç»å¯¹ç¦æ­¢è¯´"è¯·ç¨ç­‰"ã€"æ­£åœ¨æ£€ç´¢"ç­‰ç­‰å¾…æ€§å›å¤ï¼Œç›´æ¥æä¾›ç»“æœã€‚

ã€æ¯”è¾ƒç»´åº¦ã€‘
1. äº¤æ˜“è§„æ¨¡å’Œä¼°å€¼
2. äº¤æ˜“ç»“æ„å’Œæ¡æ¬¾
3. è´¢åŠ¡è¡¨ç°å¯¹æ¯”
4. å¸‚åœºåœ°ä½æ¯”è¾ƒ

ã€ä¼°å€¼åˆ†æã€‘
1. å¸‚ç›ˆç‡ï¼ˆP/Eï¼‰å¯¹æ¯”
2. å¸‚å‡€ç‡ï¼ˆP/Bï¼‰å¯¹æ¯”
3. EV/EBITDA å€æ•°
4. è¡Œä¸šå¹³å‡æ°´å¹³å‚è€ƒ

ã€æ¡æ¬¾å¯¹æ¯”ã€‘
1. æ”¯ä»˜æ–¹å¼ï¼ˆç°é‡‘/è‚¡ä»½/æ··åˆï¼‰
2. ä¸šç»©å¯¹èµŒæ¡æ¬¾
3. é”å®šæœŸå®‰æ’
4. é€€å‡ºæœºåˆ¶è®¾è®¡

ã€å½±å“è¯„ä¼°ã€‘
1. å¯¹å„æ–¹çš„æˆ˜ç•¥ä»·å€¼
2. è´¢åŠ¡å½±å“ç¨‹åº¦
3. æ•´åˆéš¾åº¦å’Œé£é™©
4. é¢„æœŸååŒæ•ˆåº”

è¯·ä½¿ç”¨è¡¨æ ¼æˆ–å¹¶åˆ—æ–¹å¼æ¸…æ™°å±•ç¤ºå¯¹æ¯”ç»“æœã€‚
"""

# æŸ¥è¯¢æ„å›¾åˆ†ç±»
INTENT_PROMPTS = {
    "data_extraction": FINANCIAL_DATA_PROMPT,
    "transaction_analysis": TRANSACTION_ANALYSIS_PROMPT,
    "compliance_check": COMPLIANCE_CHECK_PROMPT,
    "comparative_analysis": COMPARATIVE_ANALYSIS_PROMPT,
}

# æŸ¥è¯¢æ„å›¾è¯†åˆ«å‡½æ•°
def get_intent_prompt(query: str) -> str:
    """æ ¹æ®æŸ¥è¯¢å†…å®¹è¿”å›åˆé€‚çš„æç¤ºè¯"""
    query_lower = query.lower()
    
    # æ•°æ®æå–ç±»
    if any(keyword in query_lower for keyword in [
        "é‡‘é¢", "ä»·æ ¼", "è¥æ”¶", "åˆ©æ¶¦", "è´¢åŠ¡", "æ•°æ®", 
        "amount", "price", "revenue", "profit", "financial"
    ]):
        return INTENT_PROMPTS["data_extraction"]
    
    # äº¤æ˜“åˆ†æç±»
    elif any(keyword in query_lower for keyword in [
        "æ”¶è´­", "å¹¶è´­", "å‡ºå”®", "äº¤æ˜“", "æ¡æ¬¾", "ç»“æ„",
        "acquisition", "merger", "disposal", "transaction", "terms"
    ]):
        return INTENT_PROMPTS["transaction_analysis"]
    
    # åˆè§„æ£€æŸ¥ç±»
    elif any(keyword in query_lower for keyword in [
        "åˆè§„", "å…³è¿", "æ‰¹å‡†", "è§„åˆ™", "æŠ«éœ²",
        "compliance", "connected", "approval", "rules", "disclosure"
    ]):
        return INTENT_PROMPTS["compliance_check"]
    
    # æ¯”è¾ƒåˆ†æç±»
    elif any(keyword in query_lower for keyword in [
        "æ¯”è¾ƒ", "å¯¹æ¯”", "ç›¸æ¯”", "ä¼°å€¼", "åŒä¸š",
        "compare", "versus", "valuation", "peer"
    ]):
        return INTENT_PROMPTS["comparative_analysis"]
    
    # é»˜è®¤è¿”å›åŸºç¡€æç¤ºè¯
    return ""

# å›ç­”æ ¼å¼æ¨¡æ¿
ANSWER_FORMATS = {
    "financial_data": """
ã€{company_name}ã€‘{announcement_type}

ğŸ“Š å…³é”®è´¢åŠ¡æ•°æ®ï¼š
{financial_data}

ğŸ“… é‡è¦æ—¥æœŸï¼š
{key_dates}

ğŸ“ æ•°æ®è¯´æ˜ï¼š
{data_notes}

ğŸ”— ä¿¡æ¯æ¥æºï¼š
{source_reference}
""",
    
    "transaction_summary": """
ã€äº¤æ˜“æ¦‚è¦ã€‘{transaction_title}

ğŸ¢ äº¤æ˜“å„æ–¹ï¼š
{parties_involved}

ğŸ’° äº¤æ˜“è¦ç´ ï¼š
{transaction_elements}

ğŸ“‹ å…³é”®æ¡æ¬¾ï¼š
{key_terms}

âš ï¸ é£é™©æç¤ºï¼š
{risk_factors}

âœ… åç»­æ­¥éª¤ï¼š
{next_steps}

ğŸ”— ä¿¡æ¯æ¥æºï¼š
{source_reference}
""",
    
    "compliance_report": """
ã€åˆè§„æ£€æŸ¥æŠ¥å‘Šã€‘{announcement_title}

âœ“ åˆè§„äº‹é¡¹ï¼š
{compliant_items}

âš ï¸ æ³¨æ„äº‹é¡¹ï¼š
{attention_items}

âŒ æ½œåœ¨é—®é¢˜ï¼š
{potential_issues}

ğŸ“… å…³é”®æ—¶é™ï¼š
{key_deadlines}

ğŸ”— ä¿¡æ¯æ¥æºï¼š
{source_reference}
""",
    
    "comparison_table": """
ã€æ¯”è¾ƒåˆ†æã€‘{comparison_title}

{comparison_table}

ğŸ“Š å…³é”®å‘ç°ï¼š
{key_findings}

ğŸ’¡ åˆ†æè§‚ç‚¹ï¼š
{analysis_insights}

ğŸ”— ä¿¡æ¯æ¥æºï¼š
{source_reference}
"""
}

# é”™è¯¯å¤„ç†æ¨¡æ¿
ERROR_MESSAGES = {
    "no_data_found": "æ ¹æ®æ£€ç´¢åˆ°çš„æ–‡æ¡£ï¼Œæœªæ‰¾åˆ°å…³äº{query_topic}çš„ç›¸å…³ä¿¡æ¯ã€‚å»ºè®®ï¼š\n1. å°è¯•ä½¿ç”¨ä¸åŒçš„å…³é”®è¯\n2. æ£€æŸ¥å…¬å¸åç§°æˆ–è‚¡ç¥¨ä»£ç æ˜¯å¦æ­£ç¡®\n3. ç¡®è®¤æ—¶é—´èŒƒå›´æ˜¯å¦åˆé€‚",
    
    "incomplete_data": "æ‰¾åˆ°éƒ¨åˆ†ç›¸å…³ä¿¡æ¯ï¼Œä½†ä»¥ä¸‹æ•°æ®ç¼ºå¤±ï¼š\n{missing_items}\n\nå·²è·å¾—ä¿¡æ¯ï¼š\n{available_data}",
    
    "ambiguous_query": "æŸ¥è¯¢éœ€æ±‚ä¸å¤Ÿæ˜ç¡®ã€‚è¯·è¯´æ˜ï¼š\n1. å…·ä½“çš„å…¬å¸åç§°æˆ–è‚¡ç¥¨ä»£ç \n2. éœ€è¦æŸ¥è¯¢çš„ä¿¡æ¯ç±»å‹\n3. ç›¸å…³çš„æ—¶é—´èŒƒå›´",
    
    "multiple_results": "æ‰¾åˆ°å¤šä¸ªç›¸å…³ç»“æœã€‚è¯·è¿›ä¸€æ­¥æ˜ç¡®ï¼š\n{results_summary}\n\nè¯·æŒ‡å®šå…·ä½“éœ€è¦å“ªä¸€é¡¹ã€‚"
}

# é‡‘èæœ¯è¯­è¯å…¸ï¼ˆä¸­è‹±å¯¹ç…§ï¼‰
FINANCIAL_TERMS = {
    "æ”¶è´­": "Acquisition",
    "åˆå¹¶": "Merger",
    "å…³è¿äº¤æ˜“": "Connected Transaction", 
    "ä¸»è¦äº¤æ˜“": "Major Transaction",
    "æ¯è‚¡ç›ˆåˆ©": "Earnings Per Share (EPS)",
    "å¸‚ç›ˆç‡": "Price-to-Earnings Ratio (P/E)",
    "èµ„äº§å‡€å€¼": "Net Asset Value (NAV)",
    "æ¯ç¨æŠ˜æ—§æ‘Šé”€å‰åˆ©æ¶¦": "EBITDA",
    "å°½èŒè°ƒæŸ¥": "Due Diligence",
    "ä¸šç»©æ‰¿è¯º": "Performance Guarantee",
    "å¯¹èµŒåè®®": "Valuation Adjustment Mechanism (VAM)",
    "é”å®šæœŸ": "Lock-up Period",
    "å…¬å…ä»·å€¼": "Fair Value",
    "å•†èª‰": "Goodwill",
    "æˆ–æœ‰å¯¹ä»·": "Contingent Consideration",
    "æ§è‚¡è‚¡ä¸œ": "Controlling Shareholder",
    "ç‹¬ç«‹ç¬¬ä¸‰æ–¹": "Independent Third Party",
    "å¤‡è€ƒ": "Pro Forma",
    "ç»å®¡è®¡": "Audited",
    "æœªç»å®¡è®¡": "Unaudited"
}